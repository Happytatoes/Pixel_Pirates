/* ===== Base ===== */
*, input, button, select, textarea { font-family: 'Press Start 2P', monospace; }
* { margin: 0; padding: 0; box-sizing: border-box; }

body {
  font-family: 'Press Start 2P';
  background: linear-gradient(to bottom right, #d4f1f4, #c1e1dc, #fef6e4);
  min-height: 100vh;
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 20px;
}

/* ===== Layout ===== */
:root { --nav-h: 68px; }

.container {
  width: 100%;
  max-width: 448px;
  height: 90vh;
  max-height: 800px;
}

.card {
  background: #fffafc;
  border-radius: 24px;
  box-shadow: 0 15px 30px -10px rgba(0, 0, 0, 0.1);
  overflow: hidden;
  height: 100%;
  display: flex;
  flex-direction: column;
  position: relative; /* anchor bottom nav inside */
}

/* Pages fill remaining space and leave room for the nav */
.page {
  display: none;
  flex: 1 1 auto;
  overflow-y: auto;
  flex-direction: column;
  padding-bottom: var(--nav-h); /* avoid content under the nav */
}
.page.active { display: flex; }

/*@keyframes fadeIn {
  from { opacity: 0; transform: translateX(20px); }
  to   { opacity: 1; transform: translateX(0); }
}
*/ 

/* Pop animation used only on state change */
@keyframes petPop {
  0%   { transform: scale(1); }
  50%  { transform: scale(1.05); }
  100% { transform: scale(1); }
}

/* Two pulses, then still */
.pet.pop {
  animation: petPop 1500ms ease-in-out 2;
}


/* ===== Header ===== */
.header {
  background: #e3c2ff;
  padding: 16px;
  display: flex;
  justify-content: space-between;
  align-items: center;
  color: #3d3d3d;
}
.header-left { display: flex; align-items: center; gap: 8px; }
.header h1 { font-size: 24px; font-weight: bold; }

/* ===== Pet Area ===== */
.pet-area {
  position: relative;           /* important for speech bubble positioning */
  padding: 32px;
  min-height: 300px;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  transition: background 0.5s ease;
  flex: 1;
}
.pet-area.egg        { background: linear-gradient(to bottom right, #fef9f0, #d3f9d8); }
.pet-area.atrocious  { background: linear-gradient(to bottom right, #ffe5e5, #ffd6d6); }
.pet-area.critical   { background: linear-gradient(to bottom right, #fcd5ce, #f9c5c5); }
.pet-area.struggling { background: linear-gradient(to bottom right, #ffe7b3, #fff0b3); }
.pet-area.surviving  { background: linear-gradient(to bottom right, #d0f4de, #a9f0c1); }
.pet-area.healthy    { background: linear-gradient(to bottom right, #c7f0f0, #a0e6e6); }
.pet-area.thriving   { background: linear-gradient(to bottom right, #fddde6, #fbbde0); }
.pet-area.fantastic  { background: linear-gradient(to bottom right, #fff1b8, #ffe38f, #ffdc6f); }

/* Pet */
.pet { font-size: 180px; margin-top: 64px; transition: all 0.5s ease;
       display:flex; align-items:center; justify-content:center; min-height:96px; }
.pet.bounce { animation: bounce 1s infinite; }
.pet.pulse  { animation: pulse 2s infinite;}
@keyframes bounce { 0%,100%{transform:translateY(0)} 50%{transform:translateY(-20px)} }
@keyframes pulse  { 0%,100%{opacity:1} 50%{opacity:.5} }

.pet img.pet-img {
  width: 180px; height: 180px;
  image-rendering: pixelated;
  image-rendering: crisp-edges;
}

/* State Name */
.state-name {
  margin-top: 16px; color: #3d3d3d; font-weight: bold; font-size: 20px;
  letter-spacing: .1em; text-shadow: 0 2px 4px rgba(255,255,255,.5);
}

/* ===== Stats ===== */
.stats { margin-top: 24px; width: 100%; display: flex; flex-direction: column; gap: 12px; }

.stat-bar {
  background: #fff8e0; border: 2px solid #000; border-radius: 0; padding: 12px;
  box-shadow: 4px 4px 0 rgba(0,0,0,.15);
}
.stat-header { display: flex; justify-content: space-between; margin-bottom: 4px; }

.stat-label, .stat-value {
  color: #000; font-size: 10px; font-weight: 600;
  text-shadow: 1px 1px 0 rgba(255,255,255,.5);
}

.progress-bar {
  width: 100%; height: 12px; background: #e0e0e0; border: 2px solid #000; border-radius: 0;
  overflow: hidden; box-shadow: inset 2px 2px 0 rgba(0,0,0,.2);
}
.progress-fill { height: 100%; transition: width 1s ease; border-radius: 0; position: relative; }

.health-fill {
  border-right: 2px solid rgba(0,0,0,.3);
  transition: background-color 1s ease;
  background-image: repeating-linear-gradient(90deg, transparent, transparent 4px, rgba(255,255,255,.1) 4px, rgba(255,255,255,.1) 8px);
}
.health-fill[data-health="critical"]  { background-color:#e74c3c; }
.health-fill[data-health="low"]       { background-color:#ff6b4a; }
.health-fill[data-health="medium"]    { background-color:#f39c12; }
.health-fill[data-health="good"]      { background-color:#f1c40f; }
.health-fill[data-health="excellent"] { background-color:#65d52d; }

/* ===== Form Area ===== */
.form-area { padding: 24px; flex: 1; overflow-y: auto; }
.form-title { font-size: 18px; font-weight: bold; color: #3d3d3d; margin-bottom: 16px; display:flex; align-items:center; gap:8px; }

.input-group { margin-bottom: 12px; }
.input-group label { display:block; font-size:12px; font-weight:600; color:#3d3d3d; margin-bottom:4px; }
.input-group input {
  width: 100%; padding: 8px; border: 2px solid #000; border-radius: 0;
  font-size: 12px; background:#fffef0; color:#000; box-shadow:none;
}
.input-group input:focus { outline: 2px solid #ff6ec7; }
.input-group input::placeholder { color:#000; opacity:1; }

.submit-btn {
  font-family:'Press Start 2P', monospace;
  background:#65d52d; color:#000; border:2px solid #000; border-radius:0;
  padding:12px; text-transform:uppercase; cursor:pointer;
  display:block; width:220px; margin:16px auto 0;
}
.submit-btn:hover{ background:#afdd99; }
.submit-btn:disabled{ background:#f0f0f0; cursor:not-allowed; transform:none; }

/* ===== Bottom Navigation (anchored inside card, expanded height, flat bottom) ===== */
:root { --nav-h: 88px; } /* keeps the taller height */

/* The nav sits flush at the bottom of the .card (no curve, no shadow gap) */
.bottom-nav {
  position: absolute;
  left: 0;
  right: 0;
  bottom: 0;
  height: var(--nav-h);

  display: flex;
  align-items: center;
  justify-content: space-around;

  background: #fffaf0;
  border-top: 2px solid #000; /* pixel outline at top only */
  border-radius: 0; /* remove curved corners */
  box-shadow: none; /* remove inner bands & drop shadow */
  z-index: 5;
}

/* Ensure pages leave enough space for nav */
.page {
  flex: 1 1 auto;
  overflow-y: auto;
  padding-bottom: var(--nav-h);
}

/* ===== Nav Buttons ===== */
.nav-btn {
  flex: 1 1 0;
  height: calc(var(--nav-h) - 24px);
  margin: 0 8px;
  border: 2px solid #000;
  border-radius: 8px; /* subtle rounded buttons only */
  background: #fff;
  color: #666;

  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: 6px;

  cursor: pointer;
  transition: transform .08s ease, background .12s ease;
}

.nav-btn:hover {
  transform: translateY(-1px);
  background: #f5f5f5;
}

.nav-btn.active {
  background: #e8f0ff;
  color: #000;
}

.nav-icon { font-size: 22px; }
.nav-label { font-size: 11px; font-weight: 600; }

/* ===== End Bottom Navigation ===== */

/* ===== Responsive ===== */
@media (max-width:480px){
  .container { height:100vh; padding:0; }
  .card { border-radius:0; }
  .pet { font-size:72px; }
  .state-name { font-size:16px; }
}

/* ===== Legacy always-open bubble (your retro one) ===== */
.speech-bubble p { font-size:14px; color:#3d3d3d; line-height:1.5; }
.speech-bubble{
  position:absolute; top:16px; left:16px; right:16px;
  background:#fff8e0; border:2px solid #000; border-radius:0;
  padding:16px; font-size:10px; line-height:1.4; color:#000;
}

/* Keep pet area positioned for the script bubble API */
#petArea { position: relative; }

/* Balance Display */
.balance-display{
  text-align:center; padding:24px; background:linear-gradient(135deg,#fff1b8,#ffe38f);
  border-radius:12px; margin-bottom:24px; border:3px solid #000;
}
.balance-display h2{ font-size:14px; margin-bottom:12px; color:#3d3d3d; }
.balance-amount{ font-size:32px; font-weight:bold; color:#000; text-shadow:2px 2px 0 rgba(255,255,255,.5); }

/* Divider */
.divider{ border:none; border-top:2px dashed #000; margin:24px 0; }

/* Section Titles */
.section-title{ font-size:14px; margin-bottom:12px; color:#3d3d3d; text-transform:uppercase; }

/* Actions */
.action-group{ display:flex; gap:8px; margin-bottom:20px; }
.action-input{
  flex:1; padding:10px; border:2px solid #000; border-radius:0; font-size:12px; background:#fffef0; color:#000;
}
.action-input:focus{ outline:2px solid #ff6ec7; }
.action-btn{ font-family:'Press Start 2P', monospace; padding:12px 20px; border:2px solid #000; border-radius:0; cursor:pointer; font-size:12px; transition:all .2s; }
.deposit-btn{ background:#65d52d; color:#000; }
.deposit-btn:hover{ background:#afdd99; }
.withdraw-btn{ background:#ff6b6b; color:#fff; }
.withdraw-btn:hover{ background:#ff9999; }
.action-btn:disabled{ background:#ccc; cursor:not-allowed; }

.pet-egg {
  width: 140px;
  display: block;
  margin: 0 auto;
  filter: drop-shadow(3px 3px 0 #000);
  animation: eggBounce 1.8s ease-in-out infinite;
  image-rendering: pixelated;
  image-rendering: crisp-edges;
}

@keyframes eggBounce {
  0%, 100% { transform: translateY(0); }
  50% { transform: translateY(-6px); }
}

/* ===== Pixel Arrow Effects (append-only) ===== */

/* container anchored by JS just above the pet */
.arrow-container{
  position:absolute;
  left:50%;
  bottom:100%;               /* sits just above the pet */
  transform:translateX(-50%);
  display:flex;
  gap:6px;
  pointer-events:none;
  z-index:4;                 /* over pet, under overlays */
}

/* tiny pixel arrows rendered via inline SVG backgrounds */
.arrow-up,
.arrow-down{
  width:28px;
  height:28px;
  image-rendering:pixelated;
  background-size:contain;
  background-repeat:no-repeat;
  opacity:0;
}

/* green up arrow (8-bit blocky) */
.arrow-up{
  background-image:
    url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 10 10'><rect x='4' y='1' width='2' height='3' fill='%232ecc71'/><rect x='3' y='2' width='4' height='2' fill='%232ecc71'/><rect x='2' y='3' width='6' height='2' fill='%232ecc71'/><rect x='4' y='4' width='2' height='5' fill='%232ecc71'/></svg>");
  animation:arrowRise 2700ms ease-out forwards;
}

/* red down arrow (8-bit blocky) */
.arrow-down{
  background-image:
    url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 10 10'><rect x='4' y='1' width='2' height='5' fill='%23e74c3c'/><rect x='2' y='6' width='6' height='2' fill='%23e74c3c'/><rect x='3' y='7' width='4' height='2' fill='%23e74c3c'/><rect x='4' y='8' width='2' height='2' fill='%23e74c3c'/></svg>");
  animation:arrowFall 2700ms ease-out forwards;
}

/* gentle stagger for the trio */
.arrow-container > *:nth-child(2){ animation-delay:80ms; }
.arrow-container > *:nth-child(3){ animation-delay:160ms; }

/* motion + fade */
@keyframes arrowRise{
  0%{   transform:translateY(15px);   opacity:1; }
  100%{ transform:translateY(-24px); opacity:0; }
}
@keyframes arrowFall{
  0%{   transform:translateY(15px);   opacity:1; }
  100%{ transform:translateY(39px);  opacity:0; }
}

#headerTitle {
  text-align: center;       /* center header if needed */
  margin: 0;
  padding: 0;
}

#headerLogo {
  height: 48px;            /* adjust size to fit header */
  width: auto;
  vertical-align: middle;  /* align nicely if next to text */
}